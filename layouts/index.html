{{ define "main" }}
<div class="home">
    <section class="hero">
        <div class="hero-content">
            {{ with .Site.Params.homeInfoParams }}
            <h1 class="hero-title">{{ .Title | safeHTML }}</h1>
            <p class="hero-subtitle">{{ .Content | safeHTML }}</p>
            {{ end }}
        </div>
    </section>

    <section class="posts-section">
        <h2 class="section-title">{{ if eq .Lang "ru" }}Последние записи{{ else }}Recent Posts{{ end }}</h2>

        <div class="posts-list">
            {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts") 10 }}
            {{ range $paginator.Pages }}
            <article class="post-card">
                <a href="{{ .Permalink }}" class="post-link">
                    <div class="post-meta">
                        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
                        {{ if .Params.tags }}
                        <span class="post-tags">
                            {{ range first 2 .Params.tags }}
                            <span class="tag">{{ . }}</span>
                            {{ end }}
                        </span>
                        {{ end }}
                    </div>
                    <h3 class="post-title">{{ .Title }}</h3>
                    {{ if .Description }}
                    <p class="post-excerpt">{{ .Description }}</p>
                    {{ else if .Summary }}
                    <p class="post-excerpt">{{ .Summary | truncate 150 }}</p>
                    {{ end }}
                    {{ if $.Site.Params.ShowReadingTime }}
                    <span class="reading-time">{{ .ReadingTime }} min read</span>
                    {{ end }}
                </a>
            </article>
            {{ end }}
        </div>

        {{ if gt $paginator.TotalPages 1 }}
        <nav class="pagination">
            {{ if $paginator.HasPrev }}
            <a href="{{ $paginator.Prev.URL }}" class="pagination-link prev">&larr; {{ if eq .Lang "ru" }}Назад{{ else }}Previous{{ end }}</a>
            {{ end }}
            <span class="pagination-info">{{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}</span>
            {{ if $paginator.HasNext }}
            <a href="{{ $paginator.Next.URL }}" class="pagination-link next">{{ if eq .Lang "ru" }}Далее{{ else }}Next{{ end }} &rarr;</a>
            {{ end }}
        </nav>
        {{ end }}
    </section>
</div>
{{ end }}
